<div class="contenedor">

  <!-- Barra de progreso -->
  <div class="form-progress" *ngIf="sectionMeta.length">
    <div class="progress-header">
      <div class="progress-info">
        <span class="progress-step">{{ currentIndex + 1 }} / {{ sectionMeta.length }}</span>
        <span class="progress-label">{{ sectionMeta[currentIndex].label }}</span>
      </div>
      <div class="progress-percent">{{ progressPercent | number:'1.0-0' }}%</div>
    </div>
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="progressPercent"></div>
    </div>
    <div class="progress-dots" role="tablist" aria-label="Navegación formulario">
      <button
        *ngFor="let sec of sectionMeta; index as i"
        type="button"
        class="dot"
        [class.active]="i===currentIndex"
        [class.completed]="i < currentIndex"
        (click)="goTo(i)"
        [attr.aria-label]="sec.label"
        [attr.aria-selected]="i===currentIndex">
      </button>
    </div>
  </div>

  <h1 class="titulo-form">Formulario de contratación</h1>

  <form [formGroup]="formHojaDeVida" (ngSubmit)="onSubmit()">

    <!-- ========================================================= -->
    <!-- 1. DATOS PERSONALES -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="datosPersonales" #formSection>
      <div class="title"><h2>Datos personales</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>Número de cédula</mat-label>
          <input matInput type="number" formControlName="numeroCedula">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Primer apellido</mat-label>
          <input matInput formControlName="primerApellido">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Segundo apellido</mat-label>
          <input matInput formControlName="segundoApellido">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Primer nombre</mat-label>
          <input matInput formControlName="primerNombre">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Segundo nombre</mat-label>
          <input matInput formControlName="segundoNombre">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Estado civil</mat-label>
          <mat-select formControlName="estadoCivil">
            <mat-option *ngFor="let ec of estadosCiviles" [value]="ec.codigo">{{ ec.descripcion }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="campo-2">
          <mat-label>Correo electrónico</mat-label>
          <input matInput type="email" formControlName="email">
        </mat-form-field>

        <mat-form-field appearance="fill" class="campo-full">
          <mat-label>Dirección</mat-label>
          <input matInput formControlName="direccion">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Barrio</mat-label>
          <input matInput formControlName="barrio">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Teléfono celular</mat-label>
          <input matInput formControlName="telefonoCelular" type="tel">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Ciudad de residencia</mat-label>
          <input matInput formControlName="ciudadResidencia">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Departamento de residencia</mat-label>
          <mat-select formControlName="departamentoResidencia">
            <mat-option *ngFor="let d of departamentos" [value]="d">{{ d }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Departamento de nacimiento</mat-label>
          <mat-select formControlName="departamentoNacimiento">
            <mat-option *ngFor="let d of departamentos" [value]="d">{{ d }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Nacionalidad</mat-label>
          <mat-select formControlName="nacionalidad">
            <mat-option *ngFor="let n of nacionalidades" [value]="n">{{ n }}</mat-option>
          </mat-select>
        </mat-form-field>

      </div>
      <div class="section-footer">
        <button type="button" class="next-arrow"
                (click)="goNext()" [disabled]="!isSectionValid(currentIndex)">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 2. DATOS CÉDULA -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="datosCedula" #formSection>
      <div class="title"><h2>Datos cédula</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>Fecha nacimiento</mat-label>
          <input matInput [matDatepicker]="dpNac" formControlName="fechaNacimiento">
          <mat-datepicker-toggle matIconSuffix [for]="dpNac"></mat-datepicker-toggle>
          <mat-datepicker #dpNac startView="multi-year" [startAt]="startDate"></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Fecha expedición</mat-label>
          <input matInput [matDatepicker]="dpExp" formControlName="fechaExpedicion">
          <mat-datepicker-toggle matIconSuffix [for]="dpExp"></mat-datepicker-toggle>
          <mat-datepicker #dpExp startView="multi-year" [startAt]="startDate"></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>RH</mat-label>
          <mat-select formControlName="rh">
            <mat-option *ngFor="let t of tiposSangre" [value]="t">{{ t }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Género</mat-label>
          <mat-select formControlName="genero">
            <mat-option *ngFor="let g of generos" [value]="g">{{ g }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Mano dominante</mat-label>
          <mat-select formControlName="manoDominante">
            <mat-option *ngFor="let m of manos" [value]="m.valor">{{ m.desc }}</mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Archivo frontal -->
        <div class="file campo-2">
          <input type="file" #cedulaFrontal class="input-file" accept="image/*"
                 (change)="onFileFrontal($event)">
          <button type="button" class="boton" (click)="cedulaFrontal.click()">Foto frontal cédula</button>
          <div class="preview-img" *ngIf="previsualizacionFrontal">
            <img [src]="previsualizacionFrontal" alt="Cédula frontal">
          </div>
        </div>

        <!-- Archivo posterior -->
        <div class="file campo-2">
          <input type="file" #cedulaPosterior class="input-file" accept="image/*"
                 (change)="onFilePosterior($event)">
          <button type="button" class="boton2" (click)="cedulaPosterior.click()">Foto posterior cédula</button>
          <div class="preview-img" *ngIf="previsualizacionPosterior">
            <img [src]="previsualizacionPosterior" alt="Cédula posterior">
          </div>
        </div>

      </div>
      <div class="section-footer">
        <button type="button" class="prev-inline" (click)="goPrev()">← Anterior</button>
        <button type="button" class="next-arrow"
                (click)="goNext()" [disabled]="!isSectionValid(currentIndex)">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 3. DATOS ESCOLARES -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="datosEscolares" #formSection>
      <div class="title"><h2>Datos escolares</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>Nivel de escolaridad</mat-label>
          <mat-select formControlName="nivelEscolaridad">
            <mat-option *ngFor="let n of nivelesEscolaridad" [value]="n">{{ n }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill"
                        *ngIf="formHojaDeVida.get('nivelEscolaridad')?.value === 'Otro'">
          <mat-label>Especifique nivel</mat-label>
          <input matInput formControlName="nivelEscolaridadOtro">
        </mat-form-field>

        <mat-form-field appearance="fill" class="campo-2">
          <mat-label>Institución</mat-label>
          <input matInput formControlName="nombreInstitucion">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Año finalización</mat-label>
          <input matInput [matDatepicker]="dpFin" formControlName="anoFinalizacion">
          <mat-datepicker-toggle matIconSuffix [for]="dpFin"></mat-datepicker-toggle>
          <mat-datepicker #dpFin startView="multi-year" [startAt]="startDate"></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Título obtenido</mat-label>
          <mat-select formControlName="tituloObtenido">
            <mat-option value="Bachiller">Bachiller</mat-option>
            <mat-option value="Técnico">Técnico</mat-option>
            <mat-option value="Tecnólogo">Tecnólogo</mat-option>
            <mat-option value="Profesional">Profesional</mat-option>
            <mat-option value="Otro">Otro</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill"
                        *ngIf="formHojaDeVida.get('tituloObtenido')?.value === 'Otro'">
          <mat-label>Especificar título</mat-label>
          <input matInput formControlName="tituloObtenidoOtro">
        </mat-form-field>

      </div>
      <div class="section-footer">
        <button type="button" class="prev-inline" (click)="goPrev()">← Anterior</button>
        <button type="button" class="next-arrow"
                (click)="goNext()" [disabled]="!isSectionValid(currentIndex)">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 4. DATOS TALLAS -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="datosTallas" #formSection>
      <div class="title"><h2>Datos tallas</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>Talla chaqueta</mat-label>
          <mat-select formControlName="tallaChaqueta">
            <mat-option *ngFor="let t of tallas" [value]="t">{{ t }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Talla pantalón</mat-label>
          <mat-select formControlName="tallaPantalon">
            <mat-option *ngFor="let t of tallas" [value]="t">{{ t }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Talla camisa</mat-label>
          <mat-select formControlName="tallaCamisa">
            <mat-option *ngFor="let t of tallas" [value]="t">{{ t }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Talla calzado</mat-label>
          <mat-select formControlName="tallaCalzado">
            <mat-option *ngFor="let c of tallasCalzado" [value]="c">{{ c }}</mat-option>
          </mat-select>
        </mat-form-field>

      </div>
      <div class="section-footer">
        <button type="button" class="prev-inline" (click)="goPrev()">← Anterior</button>
        <button type="button" class="next-arrow" (click)="goNext()">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 5. CONTACTO EMERGENCIA -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="datosFamiliares" #formSection>
      <div class="title"><h2>Contacto de emergencia</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>Nombre</mat-label>
          <input matInput formControlName="nombreFamiliar">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Parentesco</mat-label>
          <mat-select formControlName="parentescoFamiliar">
            <mat-option *ngFor="let p of parentescos" [value]="p">{{ p }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Teléfono</mat-label>
          <input matInput formControlName="telefonoFamiliar">
        </mat-form-field>

        <mat-form-field appearance="fill" class="campo-2">
          <mat-label>Dirección</mat-label>
          <input matInput formControlName="direccionFamiliar">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Barrio</mat-label>
          <input matInput formControlName="barrioFamiliar">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Ocupación</mat-label>
          <mat-select formControlName="ocupacionFamiliar">
            <mat-option *ngFor="let o of ocupaciones" [value]="o">{{ o }}</mat-option>
          </mat-select>
        </mat-form-field>

      </div>
      <div class="section-footer">
        <button type="button" class="prev-inline" (click)="goPrev()">← Anterior</button>
        <button type="button" class="next-arrow" (click)="goNext()">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 6. PAREJA -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="datosPareja" #formSection>
      <div class="title"><h2>Pareja</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>¿Tiene pareja?</mat-label>
          <mat-select formControlName="tienePareja">
            <mat-option *ngFor="let v of opcionSiNo" [value]="v">{{ v }}</mat-option>
          </mat-select>
        </mat-form-field>

        <ng-container *ngIf="formHojaDeVida.get('tienePareja')?.value === 'Si'">

          <mat-form-field appearance="fill">
            <mat-label>Nombre</mat-label>
            <input matInput formControlName="nombrePareja">
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Ocupación</mat-label>
            <input matInput formControlName="ocupacionPareja">
          </mat-form-field>

          <mat-form-field appearance="fill" class="campo-2">
            <mat-label>Dirección</mat-label>
            <input matInput formControlName="direccionPareja">
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Teléfono</mat-label>
            <input matInput formControlName="telefonoPareja">
          </mat-form-field>

            <mat-form-field appearance="fill">
            <mat-label>Barrio</mat-label>
            <input matInput formControlName="barrioPareja">
          </mat-form-field>

        </ng-container>

      </div>
      <div class="section-footer">
        <button type="button" class="prev-inline" (click)="goPrev()">← Anterior</button>
        <button type="button" class="next-arrow" (click)="goNext()">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 7. HIJOS -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="datosHijos" #formSection>
      <div class="title"><h2>Hijos</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>Número de hijos</mat-label>
          <mat-select formControlName="numeroHijos">
            <mat-option *ngFor="let h of hijosPosibles" [value]="h">{{ h }}</mat-option>
          </mat-select>
        </mat-form-field>

        <div class="repetidor-hijos" formArrayName="hijos" *ngIf="hijosArray.controls.length">
          <div class="hijo-card" *ngFor="let hijo of hijosArray.controls; let i = index" [formGroupName]="i">
            <h3>Hijo {{ i + 1 }}</h3>

            <mat-form-field appearance="fill">
              <mat-label>Nombre</mat-label>
              <input matInput formControlName="nombre">
            </mat-form-field>

            <mat-form-field appearance="fill">
              <mat-label>Sexo</mat-label>
              <mat-select formControlName="sexo">
                <mat-option value="M">M</mat-option>
                <mat-option value="F">F</mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="fill">
              <mat-label>Fecha nacimiento</mat-label>
              <input matInput [matDatepicker]="pickerH" formControlName="fechaNacimiento">
              <mat-datepicker-toggle matIconSuffix [for]="pickerH"></mat-datepicker-toggle>
              <mat-datepicker #pickerH startView="multi-year"></mat-datepicker>
            </mat-form-field>

            <mat-form-field appearance="fill">
              <mat-label>Documento</mat-label>
              <input matInput formControlName="documento">
            </mat-form-field>

            <mat-form-field appearance="fill">
              <mat-label>Curso</mat-label>
              <mat-select formControlName="curso">
                <mat-option *ngFor="let c of cursosHijos" [value]="c">{{ c }}</mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="fill">
              <mat-label>Actividad</mat-label>
              <mat-select formControlName="actividad">
                <mat-option *ngFor="let a of actividadesHijos" [value]="a">{{ a }}</mat-option>
              </mat-select>
            </mat-form-field>

          </div>
        </div>

      </div>
      <div class="section-footer">
        <button type="button" class="prev-inline" (click)="goPrev()">← Anterior</button>
        <button type="button" class="next-arrow" (click)="goNext()">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 8. PADRE -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="datosPadre" #formSection>
      <div class="title"><h2>Padre</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>¿Padre vivo?</mat-label>
          <mat-select formControlName="padreVivo">
            <mat-option *ngFor="let v of opcionSiNo" [value]="v">{{ v }}</mat-option>
          </mat-select>
        </mat-form-field>

        <ng-container *ngIf="formHojaDeVida.get('padreVivo')?.value === 'Si'">

          <mat-form-field appearance="fill">
            <mat-label>Nombre</mat-label>
            <input matInput formControlName="nombrePadre">
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Ocupación</mat-label>
            <input matInput formControlName="ocupacionPadre">
          </mat-form-field>

          <mat-form-field appearance="fill" class="campo-2">
            <mat-label>Dirección</mat-label>
            <input matInput formControlName="direccionPadre">
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Teléfono</mat-label>
            <input matInput formControlName="telefonoPadre">
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Barrio</mat-label>
            <input matInput formControlName="barrioPadre">
          </mat-form-field>

        </ng-container>

      </div>
      <div class="section-footer">
        <button type="button" class="prev-inline" (click)="goPrev()">← Anterior</button>
        <button type="button" class="next-arrow" (click)="goNext()">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 9. MADRE -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="datosMadre" #formSection>
      <div class="title"><h2>Madre</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>¿Madre viva?</mat-label>
          <mat-select formControlName="madreViva">
            <mat-option *ngFor="let v of opcionSiNo" [value]="v">{{ v }}</mat-option>
          </mat-select>
        </mat-form-field>

        <ng-container *ngIf="formHojaDeVida.get('madreViva')?.value === 'Si'">

          <mat-form-field appearance="fill">
            <mat-label>Nombre</mat-label>
            <input matInput formControlName="nombreMadre">
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Ocupación</mat-label>
            <input matInput formControlName="ocupacionMadre">
          </mat-form-field>

          <mat-form-field appearance="fill" class="campo-2">
            <mat-label>Dirección</mat-label>
            <input matInput formControlName="direccionMadre">
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Teléfono</mat-label>
            <input matInput formControlName="telefonoMadre">
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Barrio</mat-label>
            <input matInput formControlName="barrioMadre">
          </mat-form-field>

        </ng-container>

      </div>
      <div class="section-footer">
        <button type="button" class="prev-inline" (click)="goPrev()">← Anterior</button>
        <button type="button" class="next-arrow" (click)="goNext()">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 10. REFERENCIA -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="datosReferencia" #formSection>
      <div class="title"><h2>Referencia</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>Nombre</mat-label>
          <input matInput formControlName="nombreReferencia">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Teléfono</mat-label>
          <input matInput formControlName="telefonoReferencia">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Ocupación</mat-label>
          <input matInput formControlName="ocupacionReferencia">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>¿Tiene experiencia laboral?</mat-label>
          <mat-select formControlName="tieneExperiencia">
            <mat-option *ngFor="let v of opcionSiNo" [value]="v">{{ v }}</mat-option>
          </mat-select>
        </mat-form-field>

      </div>
      <div class="section-footer">
        <button type="button" class="prev-inline" (click)="goPrev()">← Anterior</button>
        <button type="button" class="next-arrow" (click)="goNext()">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 11. EXPERIENCIA LABORAL -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="experienciaLaboral" #formSection>
      <div class="title"><h2>Experiencia laboral</h2></div>
      <div class="datos" *ngIf="formHojaDeVida.get('tieneExperiencia')?.value === 'Si'; else sinExp">

        <mat-form-field appearance="fill">
          <mat-label>Empresa</mat-label>
          <input matInput formControlName="empresaAnterior">
        </mat-form-field>

        <mat-form-field appearance="fill" class="campo-2">
          <mat-label>Dirección empresa</mat-label>
          <input matInput formControlName="direccionEmpresa">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Teléfono empresa</mat-label>
          <input matInput formControlName="telefonoEmpresa">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Jefe inmediato</mat-label>
          <input matInput formControlName="nombreJefeInmediato">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Cargo</mat-label>
          <input matInput formControlName="cargoEmpresa">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Área de experiencia</mat-label>
          <mat-select formControlName="areaExperiencia">
            <mat-option *ngFor="let a of experienciaAreas" [value]="a">{{ a }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Fecha de retiro</mat-label>
          <input matInput [matDatepicker]="dpRet" formControlName="fechaRetiroEmpresa">
          <mat-datepicker-toggle matIconSuffix [for]="dpRet"></mat-datepicker-toggle>
          <mat-datepicker #dpRet></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Motivo de retiro</mat-label>
          <mat-select formControlName="motivoRetiroEmpresa">
            <mat-option *ngFor="let m of motivosRetiro" [value]="m">{{ m }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Tiempo trabajado</mat-label>
          <mat-select formControlName="tiempoTrabajado">
            <mat-option *ngFor="let t of tiemposTrabajo" [value]="t">{{ t }}</mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Extra (flores) -->
        <mat-form-field appearance="fill" class="campo-2">
          <mat-label>Empresas de flores (separadas por coma)</mat-label>
          <input matInput formControlName="empresasFlores">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Área (flores)</mat-label>
          <mat-select formControlName="areaFloresSelect">
            <mat-option *ngFor="let a of experienciaAreas" [value]="a">{{ a }}</mat-option>
            <mat-option value="Otro">Otro</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill"
                        *ngIf="formHojaDeVida.get('areaFloresSelect')?.value === 'Otro'">
          <mat-label>Área específica</mat-label>
          <input matInput formControlName="areaFloresOtro">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Calificación rendimiento</mat-label>
          <mat-select formControlName="calificacionRendimiento">
            <mat-option *ngFor="let c of calificaciones" [value]="c">{{ c }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="campo-2">
          <mat-label>Motivo de la calificación</mat-label>
          <input matInput formControlName="razonCalificacion">
        </mat-form-field>

      </div>
      <ng-template #sinExp>
        <p class="mensaje-simple">No indicó experiencia laboral.</p>
      </ng-template>
      <div class="section-footer">
        <button type="button" class="prev-inline" (click)="goPrev()">← Anterior</button>
        <button type="button" class="next-arrow" (click)="goNext()">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 12. ENTREVISTA VIRTUAL -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="entrevistaVirtual" #formSection>
      <div class="title"><h2>Entrevista virtual</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>Tiempo en la zona</mat-label>
          <mat-select formControlName="tiempoZona">
            <mat-option *ngFor="let d of duracionZona" [value]="d">{{ d }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Tipo de vivienda</mat-label>
          <mat-select formControlName="tipoVivienda">
            <mat-option *ngFor="let tv of tiposVivienda" [value]="tv">{{ tv }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>¿Estudia actualmente?</mat-label>
          <mat-select formControlName="estudiaActualmente">
            <mat-option *ngFor="let v of opcionSiNo" [value]="v">{{ v }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Hijos a cargo</mat-label>
          <mat-select formControlName="hijosACargo">
            <mat-option *ngFor="let h of hijosPosibles" [value]="h">{{ h }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>¿Quién los cuida?</mat-label>
          <mat-select formControlName="quienLosCuida">
            <mat-option *ngFor="let q of quienCuida" [value]="q">{{ q }}</mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Con quién vive -->
        <div class="example-section" formArrayName="conQuienVive">
          <h3>¿Con quién vive?</h3>
          <div class="opcion-checkbox" *ngFor="let o of respuestasConQuienVive; let i = index">
            <mat-checkbox [formControlName]="i">{{ o }}</mat-checkbox>
          </div>
        </div>

        <!-- Personas a cargo -->
        <div class="example-section" formArrayName="personasACargo">
          <h3>Personas a cargo</h3>
          <div class="opcion-checkbox" *ngFor="let o of respuestasPersonasACargo; let i = index">
            <mat-checkbox [formControlName]="i">{{ o }}</mat-checkbox>
          </div>
        </div>

      </div>
      <div class="section-footer">
        <button type="button" class="prev-inline" (click)="goPrev()">← Anterior</button>
        <button type="button" class="next-arrow" (click)="goNext()">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 13. FAMILIA / SOCIO-EMOCIONAL -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="familia" #formSection>
      <div class="title"><h2>Familia</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>Relación familiar</mat-label>
          <mat-select formControlName="relacionFamiliar">
            <mat-option value="Mala">Mala</mat-option>
            <mat-option value="Regular">Regular</mat-option>
            <mat-option value="Buena">Buena</mat-option>
            <mat-option value="Excelente">Excelente</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="campo-2">
          <mat-label>Motivos de felicitación laboral</mat-label>
          <input matInput formControlName="motivosFelicitacion">
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>¿Conflictos laborales previos?</mat-label>
          <mat-select formControlName="conflictosLaborales">
            <mat-option value="No">No</mat-option>
            <mat-option value="Si">Sí</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill"
                        *ngIf="formHojaDeVida.get('conflictosLaborales')?.value === 'Si'">
          <mat-label>Detalle conflictos</mat-label>
          <input matInput formControlName="conflictosDetalle">
        </mat-form-field>

        <mat-form-field appearance="fill" class="campo-2">
          <mat-label>Proyecto de vida (3 años)</mat-label>
          <input matInput formControlName="proyectoVida">
        </mat-form-field>

        <mat-form-field appearance="fill" class="campo-2">
          <mat-label>Experiencia significativa</mat-label>
          <input matInput formControlName="experienciaSignificativa">
        </mat-form-field>

      </div>
      <div class="section-footer">
        <button type="button" class="prev-inline" (click)="goPrev()">← Anterior</button>
        <button type="button" class="next-arrow" (click)="goNext()">
          <span>Continuar</span><span class="icon">↓</span>
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- 14. PUBLICIDAD -->
    <!-- ========================================================= -->
    <section class="form-section" data-key="publicidad" #formSection>
      <div class="title"><h2>Publicidad</h2></div>
      <div class="datos">

        <mat-form-field appearance="fill">
          <mat-label>¿Cómo se enteró del empleo?</mat-label>
          <mat-select formControlName="medioPublicidadSelect">
            <mat-option value="Voz a voz">Voz a voz</mat-option>
            <mat-option value="Perifoneo">Perifoneo</mat-option>
            <mat-option value="Volantes">Volantes</mat-option>
            <mat-option value="Ya trabajó con nosotros">Ya trabajó con nosotros</mat-option>
            <mat-option value="Redes sociales">Redes sociales</mat-option>
            <mat-option value="Otro">Otro</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill"
                        *ngIf="formHojaDeVida.get('medioPublicidadSelect')?.value === 'Otro'">
          <mat-label>Otro medio</mat-label>
          <input matInput formControlName="medioPublicidadOtro">
        </mat-form-field>

      </div>

      <div class="section-footer final">
        <button type="button" class="prev-arrow" (click)="goPrev()">
          <span class="icon">↑</span> Anterior
        </button>
        <button type="submit" class="submit-btn" [disabled]="!isWholeFormValid()">
          Enviar formulario
        </button>
      </div>
    </section>

  </form>
</div>
